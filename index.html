<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Para Mi Amorshito Liceth ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    background:black;
    font-family:'Segoe UI', sans-serif;
    color:white;
    overflow-x:hidden;
}

/* Pantalla contrase√±a */
#lockScreen{
    position:fixed;
    width:100%;
    height:100%;
    background:black;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

#lockScreen input{
    padding:10px;
    font-size:18px;
    border-radius:10px;
    border:none;
    text-align:center;
}

#lockScreen button{
    margin-top:10px;
    padding:10px 20px;
    border:none;
    border-radius:20px;
    background:#ff4da6;
    color:white;
    cursor:pointer;
}

/* Juego */
#game{
    display:none;
    flex-direction:column;
    align-items:center;
    padding:20px;
}

#gameContainer{
    display:flex;
    gap:20px;
    margin-top:30px;
    flex-wrap:wrap;
    justify-content:center;
}

#puzzle{
    width:90vw;
    max-width:600px;
    aspect-ratio:1/1;
    display:grid;
    grid-template-columns:repeat(4,1fr);
    grid-template-rows:repeat(4,1fr);
    gap:2px;
}

.piece{
    background-image:url('1.jpg');
    background-size:cover;
    cursor:grab;
    width:100%;
    height:100%;
    touch-action: none; /* importante para touch drag */
}

#reference{
    display:flex;
    flex-direction:column;
    align-items:center;
}

#reference img{
    width:80vw;
    max-width:250px;
    border-radius:15px;
    box-shadow:0 0 20px #ff4da6;
}

/* Final */
#finalScreen{
    position:fixed;
    width:100%;
    height:100%;
    background:black;
    display:none;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
}

#slideshow{
    width:90vw;
    height:90vh;
    object-fit:contain;
    border-radius:20px;
    box-shadow:0 0 40px #ff4da6;
}
#liceth{
    font-size:50px;
    color:#ff4da6;
    animation:glow 2s infinite alternate;
}

@keyframes glow{
    from{text-shadow:0 0 10px #ff4da6;}
    to{text-shadow:0 0 40px #ff99cc;}
}

.heart, .petal{
    position:absolute;
    animation:fall linear infinite;
}

@keyframes fall{
    0%{transform:translateY(-100px);opacity:1;}
    100%{transform:translateY(100vh);opacity:0;}
}

button{
    margin-top:20px;
    padding:10px 20px;
    border:none;
    border-radius:20px;
    background:#ff4da6;
    color:white;
    cursor:pointer;
}
</style>
</head>
<body>

<div id="lockScreen">
    <h2>Ingresa nuestra fecha especial ‚ù§Ô∏è</h2>
    <input type="password" id="pass" placeholder="dd/mm/aaaa">
    <button onclick="checkPass()">Entrar</button>
</div>

<div id="game">
    <h2>Arma el rompecabezas, Liceth ‚ù§Ô∏è</h2>
    <div id="gameContainer">
        <div id="puzzle"></div>
        <div id="reference">
            <img src="1.jpg">
            <p>Imagen gu√≠a üíñ</p>
        </div>
    </div>
</div>

<div id="finalScreen">
    <div id="liceth">Recuerdos de Nuestras Aventuras Amorcito ‚ù§Ô∏è</div>
    <img id="slideshow" src="2.jpeg">
    <div id="message"></div>
    <button onclick="location.reload()">Volver a sentir ‚ù§Ô∏è</button>
</div>

<audio id="music" src="musica.mp3"></audio>

<script>
/* CONTRASE√ëA */
function checkPass(){
    const input = document.getElementById("pass").value.trim();
    if(input === "10092025" || input === "100925"){
        document.getElementById("lockScreen").style.display="none";
        document.getElementById("game").style.display="flex";
        createPieces();
    }else{
        alert("Fecha incorrecta mi amor ü•∫");
    }
}

/* PUZZLE RESPONSIVO */
const puzzle = document.getElementById("puzzle");
const size = 4;
let pieces = [];
let dragged = null;

function createPieces(){
    pieces = [];
    puzzle.innerHTML = "";
    const puzzleWidth = puzzle.clientWidth;
    const pieceSize = puzzleWidth / size;

    for(let i=0;i<size*size;i++){
        const piece = document.createElement("div");
        piece.classList.add("piece");

        // Guardar posici√≥n correcta
        const correctX = (i%size)*-pieceSize;
        const correctY = Math.floor(i/size)*-pieceSize;
        piece.dataset.correctX = correctX;
        piece.dataset.correctY = correctY;

        piece.style.backgroundPosition = `${correctX}px ${correctY}px`;
        piece.style.backgroundSize = `${puzzleWidth}px ${puzzleWidth}px`;

        pieces.push(piece);
    }

    // Mezclar piezas
    pieces.sort(()=>Math.random()-0.5);
    pieces.forEach(p=>puzzle.appendChild(p));

    pieces.forEach(piece=>{
        // Drag & Drop PC
        piece.draggable = true;
        piece.addEventListener("dragstart", e => dragged = piece);
        piece.addEventListener("dragover", e=> e.preventDefault());
        piece.addEventListener("drop", ()=>{
            let temp = dragged.style.backgroundPosition;
            dragged.style.backgroundPosition = piece.style.backgroundPosition;
            piece.style.backgroundPosition = temp;
            checkWin();
        });

        // Touch para m√≥viles
        piece.addEventListener("touchstart", e => {
            dragged = piece;
        });
        piece.addEventListener("touchmove", e => e.preventDefault());
        piece.addEventListener("touchend", e=>{
            const touch = e.changedTouches[0];
            const targetElem = document.elementFromPoint(touch.clientX, touch.clientY);
            if(targetElem && targetElem.classList.contains("piece") && targetElem !== dragged){
                let temp = dragged.style.backgroundPosition;
                dragged.style.backgroundPosition = targetElem.style.backgroundPosition;
                targetElem.style.backgroundPosition = temp;
                checkWin();
            }
        });
    });
}

window.addEventListener("resize", ()=>{
    if(document.getElementById("game").style.display==="flex"){
        createPieces();
    }
});

/* CHECK WIN */
function checkWin(){
    let correctCount = 0;
    pieces.forEach(piece=>{
        if(piece.style.backgroundPosition === piece.dataset.correctX + "px " + piece.dataset.correctY + "px"){
            correctCount++;
        }
    });
    if(correctCount === size*size){
        showFinal();
    }
}

/* FINAL */
function showFinal(){
    document.getElementById("game").style.display="none";
    document.getElementById("finalScreen").style.display="flex";
    document.getElementById("music").play();
    iniciarSlideshow();
}

/* SLIDESHOW */
const imagenes=["2.jpeg","3.jpeg","4.jpeg","5.jpeg","6.jpeg",
"7.jpeg","8.jpeg","9.jpeg","10.jpeg","11.jpeg","12.jpeg"];

let indice=0;
function iniciarSlideshow(){
    const img=document.getElementById("slideshow");
    function cambiarImagen(){
        if(indice<imagenes.length){
            img.style.opacity=0;
            setTimeout(()=>{
                img.src=imagenes[indice];
                img.style.opacity=1;
                indice++;
            },1200);
            setTimeout(cambiarImagen,4000);
        }else{
            img.style.opacity=0;
            setTimeout(()=>{
                img.style.display="none";
                typeWriter();
                createHearts();
                createPetals();
            },1200);
        }
    }
    cambiarImagen();
}

/* EFECTOS */
function createHearts(){
    setInterval(()=>{
        const heart=document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML="‚ù§Ô∏è";
        heart.style.left=Math.random()*100+"vw";
        heart.style.fontSize=(20+Math.random()*30)+"px";
        heart.style.animationDuration=(5+Math.random()*3)+"s";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),8000);
    },400);
}

function createPetals(){
    setInterval(()=>{
        const petal=document.createElement("div");
        petal.classList.add("petal");
        petal.innerHTML="üåπ";
        petal.style.left=Math.random()*100+"vw";
        petal.style.fontSize=(20+Math.random()*30)+"px";
        petal.style.animationDuration=(6+Math.random()*4)+"s";
        document.body.appendChild(petal);
        setTimeout(()=>petal.remove(),9000);
    },500);
}

/* MENSAJE */
const text=`Desde que llegaste a mi vida Amorshito todo cambi√≥... üíñ

Le agradezco a Dios por cruzar nuestros caminos,
por ponernos en el momento perfecto y en el lugar exacto,

No quiero prometerte cosas enormes ni palabras vac√≠as‚Ä¶
solo quiero caminar contigo cada d√≠a,
sostener tu mano cuando el mundo se ponga dif√≠cil,
abrazarte cuando el mundo pese,
y re√≠r contigo cuando todo brille.

Amorshito‚Ä¶ 
Eres mi paz en medio del caos.
Eres mi alegr√≠a en los d√≠as grises.
Eres mi hogar, aunque estemos en cualquier lugar.
Eres todo lo que alguna vez so√±√©,
y mucho m√°s de lo que imagin√© merecer.

Te amo profundamente con el coraz√≥n,
con el alma y con todo lo que soy.‚ù§Ô∏è`;

let i=0;
function typeWriter(){
    const msg=document.getElementById("message");
    if(i<text.length){
        msg.innerHTML+=text.charAt(i)==="\n"?"<br>":text.charAt(i);
        i++;
        setTimeout(typeWriter,45);
    }
}
</script>

</body>
</html>
